mariadb10-0:
  container_name: mariadb10-0
  image: fulcrum/mariadb
  restart: always
  volumes:
    - /dev/log:/dev/log
    - /usr/local/fulcrum/etc/mysql:/etc/mysql
    - /usr/local/fulcrum/log/mariadb:/var/log
    - /usr/local/fulcrum/data/mysql:/data/mysql
  ports:
    - "3306:3306"
  environment:
    MYSQL_ROOT_PASSWORD: PMbXdrBzG-ZXIgQeyN9K5ibN=HQ9Nt4

redis2-8:
  container_name: redis2-8
  image: fulcrum/redis
  restart: always
  volumes:
    - /dev/log:/dev/log
    - /usr/local/fulcrum/etc/redis:/etc/redis
    - /usr/local/fulcrum/log/redis:/var/log

phpfpm5-6:
  container_name: phpfpm5-6
  image: fulcrum/php
  restart: always
  volumes:
    - /dev/log:/dev/log
    - /etc/localtime:/etc/localtime:ro
    - /var/spool/postfix:/var/spool/postfix
    - /usr/local/fulcrum/etc/php.d:/etc/php.d
    - /usr/local/fulcrum/etc/php-fpm.d:/etc/php-fpm.d
    - /usr/local/fulcrum/log/php:/var/log
    - /usr/local/fulcrum/php:/fulcrum:ro
    - /usr/local/fulcrum/files:/drupal_files
    - /usr/local/fulcrum/webroots:/var/www/html:ro
    - /usr/local/repos:/var/repos:ro
    - /opt/private:/opt/private
  links:
    - mariadb10-0
    - redis2-8

nginx1-6:
  container_name: nginx1-6
  image: fulcrum/nginx
  restart: always
  volumes:
    - /dev/log:/dev/log
    - /etc/localtime:/etc/localtime:ro
    - /usr/local/fulcrum/etc/nginx:/etc/nginx
    - /usr/local/fulcrum/log/nginx:/var/log
    - /usr/local/fulcrum/files:/drupal_files
    - /usr/local/fulcrum/webroots:/var/www/html:ro
    - /usr/local/repos:/var/repos:ro
  links:
    - phpfpm5-6
  ports:
    - "8080:80"

varnish4-1:
  container_name: varnish4-1
  image: fulcrum/varnish
  restart: always
  volumes:
    - /dev/log:/dev/log
    - /usr/local/fulcrum/etc/varnish4:/etc/varnish
    - /usr/local/fulcrum/log/varnish:/var/log
  links:
    - nginx1-6
  ports:
    - "6082:6082"

haproxy1-5:
  container_name: haproxy
  image: fulcrum/haproxy:latest-alpine
  restart: always
  volumes:
    - /usr/local/haproxy/etc/haproxy:/etc/haproxy
    - /usr/local/haproxy/etc/certs.d:/usr/local/etc/certs.d
    - /usr/local/haproxy/log/haproxy:/var/log
  links:
    - varnish4-1
  ports:
    - "80:80"
    - "443:443"
    - "1936:1936"
