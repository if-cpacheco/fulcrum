#!/bin/bash

# set -x

# functions to make sure that fulcrum hinge is healthy on the Linux

# set an alias for localhost so xdebug can transmit back the IDE
# https://forums.docker.com/t/accessing-host-machine-from-within-docker-container/14248/14
# sudo ifconfig lo:0 down  - to remove
if [ -z "$(ifconfig lo:0 | grep 172.16.222.111)" ]; then
  sudo ifconfig lo:0 172.16.222.111 up
fi

if [ -n ${HOSTNAME} ]; then
  etcHosts 127.0.0.1 ${HOSTNAME}
fi

# fix solr permissions
sudo chown -R 8983.8983 ~/fulcrum/var/lib/solr

# allow for remote drush uli/site
export DISPLAY=:0

# set max virtual memory for elasticsearch
sudo sysctl -w vm.max_map_count=262144

############# START: REMOVE TO bin/doctor #############

# enable auto complete
source ~/fulcrum/bin/lib/cli-autocomplete

############# END: REMOVE TO bin/doctor #############
